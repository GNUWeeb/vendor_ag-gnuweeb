From d1a77c229074664b4a9532aac953f50790859a2b Mon Sep 17 00:00:00 2001
From: Michael Goffioul <michael.goffioul@lincor.com>
Date: Fri, 16 Apr 2021 11:15:54 -0400
Subject: [PATCH] Complete migration to MESA_PYTHON3

---
 src/gallium/drivers/r600/Android.mk |  2 +-
 src/util/Android.mk                 |  2 +-
 src/vulkan/Android.mk               | 10 +++++-----
 3 files changed, 7 insertions(+), 7 deletions(-)

diff --git a/src/gallium/drivers/r600/Android.mk b/src/gallium/drivers/r600/Android.mk
index 20030ab6b61..a0a6c387d8a 100644
--- a/src/gallium/drivers/r600/Android.mk
+++ b/src/gallium/drivers/r600/Android.mk
@@ -56,7 +56,7 @@ sfn_nir_algebraic_deps := \
 
 $(intermediates)/sfn_nir_algebraic.c: $(sfn_nir_algebraic_deps)
 	@mkdir -p $(dir $@)
-	$(hide) $(MESA_PYTHON2) $(sfn_nir_algebraic_gen) -p $(MESA_TOP)/src/compiler/nir/ > $@
+	$(hide) $(MESA_PYTHON3) $(sfn_nir_algebraic_gen) -p $(MESA_TOP)/src/compiler/nir/ > $@
 
 ifeq ($(MESA_ENABLE_LLVM),true)
 $(call mesa-build-with-llvm)
diff --git a/src/util/Android.mk b/src/util/Android.mk
index 41cd8b5aad8..5e8c17a46e4 100644
--- a/src/util/Android.mk
+++ b/src/util/Android.mk
@@ -74,7 +74,7 @@ driconf_static_deps := $(LOCAL_PATH)/00-mesa-defaults.conf
 
 $(intermediates)/driconf_static.h: $(driconf_static_deps)
 	@mkdir -p $(dir $@)
-	$(hide) $(MESA_PYTHON2) $(driconf_static_gen) $^ $@
+	$(hide) $(MESA_PYTHON3) $(driconf_static_gen) $^ $@
 
 format_srgb_gen := $(LOCAL_PATH)/format_srgb.py
 
diff --git a/src/vulkan/Android.mk b/src/vulkan/Android.mk
index 58bfb483645..b5a1da88aa4 100644
--- a/src/vulkan/Android.mk
+++ b/src/vulkan/Android.mk
@@ -70,7 +70,7 @@ $(intermediates)/util/vk_common_entrypoints.c: $(MESA_TOP)/src/vulkan/util/vk_en
 		$(vulkan_api_xml)
 	@echo "target Generated: $(PRIVATE_MODULE) <= $(notdir $(@))"
 	@mkdir -p $(dir $@)
-	$(hide) $(MESA_PYTHON2) $< \
+	$(hide) $(MESA_PYTHON3) $< \
 	    --xml $(vulkan_api_xml) \
 	    --proto --weak --prefix vk_common \
 	    --out-c $@ --out-h $(dir $@)/vk_common_entrypoints.h
@@ -81,7 +81,7 @@ $(intermediates)/util/vk_dispatch_table.c: $(MESA_TOP)/src/vulkan/util/vk_dispat
 		$(vulkan_api_xml)
 	@echo "target Generated: $(PRIVATE_MODULE) <= $(notdir $(@))"
 	@mkdir -p $(dir $@)
-	$(hide) $(MESA_PYTHON2) $< \
+	$(hide) $(MESA_PYTHON3) $< \
 	    --xml $(vulkan_api_xml) \
 	    --out-c $@
 
@@ -89,7 +89,7 @@ $(intermediates)/util/vk_dispatch_table.h: $(MESA_TOP)/src/vulkan/util/vk_dispat
 		$(vulkan_api_xml)
 	@echo "target Generated: $(PRIVATE_MODULE) <= $(notdir $(@))"
 	@mkdir -p $(dir $@)
-	$(hide) $(MESA_PYTHON2) $< \
+	$(hide) $(MESA_PYTHON3) $< \
 	    --xml $(vulkan_api_xml) \
 	    --out-h $@
 
@@ -97,7 +97,7 @@ $(intermediates)/util/vk_extensions.c: $(MESA_TOP)/src/vulkan/util/vk_extensions
 		$(vulkan_api_xml)
 	@echo "target Generated: $(PRIVATE_MODULE) <= $(notdir $(@))"
 	@mkdir -p $(dir $@)
-	$(hide) $(MESA_PYTHON2) $< \
+	$(hide) $(MESA_PYTHON3) $< \
 	    --xml $(vulkan_api_xml) \
 	    --out-c $@
 
@@ -105,7 +105,7 @@ $(intermediates)/util/vk_extensions.h: $(MESA_TOP)/src/vulkan/util/vk_extensions
 		$(vulkan_api_xml)
 	@echo "target Generated: $(PRIVATE_MODULE) <= $(notdir $(@))"
 	@mkdir -p $(dir $@)
-	$(hide) $(MESA_PYTHON2) $< \
+	$(hide) $(MESA_PYTHON3) $< \
 	    --xml $(vulkan_api_xml) \
 	    --out-h $@
 
-- 
2.30.2

