From 72a0f10f518a981d67612c6832a86f03c586c877 Mon Sep 17 00:00:00 2001
From: Hridya Valsaraju <hridya@google.com>
Date: Fri, 11 Sep 2020 14:42:31 -0700
Subject: [PATCH] Setup ueventd to support DMA-BUF heaps

Test: tested on cuttelfish with DMA-BUF heaps enabled.
Bug: 168333162
Change-Id: I2e7ed71d329edbb77319ca3cfbc4f0bf6be8fd98
---
 rootdir/ueventd.rc | 4 ++++
 1 file changed, 4 insertions(+)

diff --git a/rootdir/ueventd.rc b/rootdir/ueventd.rc
index 9c2cdf27f..1994bdb8c 100644
--- a/rootdir/ueventd.rc
+++ b/rootdir/ueventd.rc
@@ -17,6 +17,9 @@ subsystem sound
     devname uevent_devpath
     dirname /dev/snd
 
+subsystem dma_heap
+   devname uevent_devpath
+   dirname /dev/dma_heap
 # ueventd can only set permissions on device nodes and their associated
 # sysfs attributes, not on arbitrary paths.
 #
@@ -39,6 +42,7 @@ subsystem sound
 /dev/vndbinder            0666   root       root
 
 /dev/pmsg0                0222   root       log
+/dev/dma_heap/system      0666   system     system
 
 # kms driver for drm based gpu
 /dev/dri/*                0666   root       graphics
-- 
2.25.1

